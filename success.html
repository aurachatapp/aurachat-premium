<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>AuraChat Premium – Success</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#0b0f1a; color:#eaeaff; text-align:center; padding:50px; }
    .card { background:#11162a; border-radius:12px; padding:30px; display:inline-block; }
  </style>
</head>
<body>
  <div class="card">
    <h1>✅ Subscription Successful</h1>
    <p>We’re activating your AuraChat Premium now…</p>
  </div>

  <script>
    // Grab the session_id from the URL
    const params = new URLSearchParams(window.location.search);
    const sessionId = params.get("session_id");

    if (sessionId) {
      // Send it to backend to exchange for JWT
      fetch("https://aurachat-premium-backend.onrender.com/exchange-session?session_id=" + sessionId)
        .then(r => r.json())
        .then(data => {
          // Post token to extension
          window.postMessage({ type: "AURACH_SESSION", token: data.token }, "*");
        })
        .catch(err => console.error(err));
    }
  </script>
</body>
</html>
